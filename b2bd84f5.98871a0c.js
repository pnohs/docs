(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{86:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return _})),t.d(n,"metadata",(function(){return f})),t.d(n,"rightToc",(function(){return g})),t.d(n,"default",(function(){return j}));var a=t(2),r=t(6),o=t(0),l=t.n(o),i=t(87),p=t(94),c=t(89),d=t(74),u=t.n(d),s=37,m=39;var b=function(e){var n=e.block,t=e.children,a=e.defaultValue,r=e.values,i=e.groupId,d=Object(p.a)(),b=d.tabGroupChoices,O=d.setTabGroupChoices,_=Object(o.useState)(a),f=_[0],g=_[1];if(null!=i){var E=b[i];null!=E&&E!==f&&r.some((function(e){return e.value===E}))&&g(E)}var j=function(e){g(e),null!=i&&O(i,e)},M=[];return l.a.createElement("div",null,l.a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:Object(c.a)("tabs",{"tabs--block":n})},r.map((function(e){var n=e.value,t=e.label;return l.a.createElement("li",{role:"tab",tabIndex:0,"aria-selected":f===n,className:Object(c.a)("tabs__item",u.a.tabItem,{"tabs__item--active":f===n}),key:n,ref:function(e){return M.push(e)},onKeyDown:function(e){return function(e,n,t){switch(t.keyCode){case m:!function(e,n){var t=e.indexOf(n)+1;e[t]?e[t].focus():e[0].focus()}(e,n);break;case s:!function(e,n){var t=e.indexOf(n)-1;e[t]?e[t].focus():e[e.length-1].focus()}(e,n)}}(M,e.target,e)},onFocus:function(){return j(n)},onClick:function(){return j(n)}},t)}))),l.a.createElement("div",{role:"tabpanel",className:"margin-vert--md"},o.Children.toArray(t).filter((function(e){return e.props.value===f}))[0]))};var O=function(e){return l.a.createElement("div",null,e.children)},_={id:"guide-build-models",title:"\u6784\u5efa\u6c34\u6587\u6a21\u578b"},f={unversionedId:"pnohs/guide-build-models",id:"pnohs/guide-build-models",isDocsHomePage:!1,title:"\u6784\u5efa\u6c34\u6587\u6a21\u578b",description:"This section is a work in progress.",source:"@site/docs/pnohs/guide-build-models.md",permalink:"/docs/docs/pnohs/guide-build-models",editUrl:"https://git.hpcer.dev/HPCer/hydrology/pnohs-document/blob/master/docs/docs/pnohs/guide-build-models.md",lastUpdatedBy:"genshen",lastUpdatedAt:1573219209,sidebar:"pnohs",previous:{title:"\u5728\u9879\u76ee\u4e2d\u4f7f\u7528 pnohs",permalink:"/docs/docs/pnohs/lib-usage"},next:{title:"\u56fe",permalink:"/docs/docs/pnohs/graph-api"}},g=[{value:"\u6982\u89c8",id:"\u6982\u89c8",children:[]},{value:"\u5b9a\u4e49\u6a21\u578b\u53c2\u6570",id:"\u5b9a\u4e49\u6a21\u578b\u53c2\u6570",children:[]},{value:"\u5b9a\u4e49\u6a21\u578b\u4e0a\u4e0b\u6587 (ModelContext)",id:"\u5b9a\u4e49\u6a21\u578b\u4e0a\u4e0b\u6587-modelcontext",children:[]},{value:"\u5b9a\u4e49\u6a21\u578b",id:"\u5b9a\u4e49\u6a21\u578b",children:[]},{value:"\u6ce8\u518c\u6a21\u578b",id:"\u6ce8\u518c\u6a21\u578b",children:[]}],E={rightToc:g};function j(e){var n=e.components,t=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},E,t,{components:n,mdxType:"MDXLayout"}),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},Object(i.b)("em",{parentName:"strong"},"This section is a work in progress."))),Object(i.b)("h2",{id:"\u6982\u89c8"},"\u6982\u89c8"),Object(i.b)("p",null,"pnohs \u5141\u8bb8\u5f00\u53d1\u8005\u81ea\u5df1\u6dfb\u52a0\u65b0\u7684\u6a21\u578b\uff0c\u5e76\u5c06\u6a21\u578b\u7ed1\u5b9a\u5230\u5b50\u6d41\u57df\u4e0a\uff0c\u751a\u81f3\u53ef\u4ee5\u4e3a\u4e0d\u540c\u5230\u5b50\u6d41\u57df\u914d\u7f6e\u4e0d\u540c\u5230\u6c34\u6587\u6a21\u578b\u3002"),Object(i.b)("p",null,"\u5728\u4e00\u4e2a\u5b50\u6d41\u57df\u4e0a\uff0c\u6709\u4e09\u4e2a\u63a5\u53e3\u9700\u8981\u5173\u6ce8\uff0c\u5206\u522b\u4e3a ",Object(i.b)("inlineCode",{parentName:"p"},"RunoffAdapter"),"\u3001",Object(i.b)("inlineCode",{parentName:"p"},"RoutingAdapter"),"\u548c",Object(i.b)("inlineCode",{parentName:"p"},"ModelContext"),"\u3002\n\u5176\u4e2d RunoffAdapter \u548c RoutingAdapter \u5206\u522b\u4e3a\u4ea7\u6d41\u6a21\u578b\u548c\u6c47\u6d41\u6a21\u578b\u7684\u63a5\u53e3\uff0c\u53ef\u4ee5\u7ee7\u627f\u8be5\u7c7b\u5e76\u5b9e\u73b0\u5176\u4e2d\u7684\u7eaf\u865a\u51fd\u6570\u4ee5\u4ea7\u751f\u65b0\u7684\u4ea7/\u6c47\u6d41\u6a21\u578b\uff1b\nModelContext \u88ab\u5b9a\u4e49\u4e3a\u5b50\u6d41\u57df\u4e0a\u7528\u4e8e\u8fde\u63a5\u4ea7\u6d41\u6a21\u578b\u4e0e\u6c47\u6d41\u6a21\u578b\u7684\u6865\u6881\uff0c\u8d1f\u8d23\u5b50\u6d41\u57df\u4e0a\u7684\u4ea7\u6d41\u6a21\u578b\u4e0e\u6c47\u6d41\u6a21\u578b\u4e4b\u95f4\u7684\u6570\u636e\u4ea4\u6362\u4e0e\u901a\u4fe1\u3002",Object(i.b)("br",{parentName:"p"}),"\n","\u6b64\u5916\uff0c\u6a21\u578b\u7684\u53c2\u6570\u53ef\u4ee5\u901a\u8fc7\u7ee7\u627f\u7c7b",Object(i.b)("inlineCode",{parentName:"p"},"ParamsList"),"\u5b9e\u73b0\uff0c\u7528\u4e8e\u5b58\u50a8\u6a21\u578b\u7684\u53c2\u6570\u3002"),Object(i.b)("p",null,"\u6211\u4eec\u4e0b\u9762\u4f9d\u636e pnohs \u6846\u67b6\u5b9e\u73b0\u4e00\u4e2a\u81ea\u5df1\u7684\u6c34\u6587\u8ba1\u7b97\u6a21\u578b\u3002"),Object(i.b)("h2",{id:"\u5b9a\u4e49\u6a21\u578b\u53c2\u6570"},"\u5b9a\u4e49\u6a21\u578b\u53c2\u6570"),Object(i.b)("p",null,"\u5148\u5bf9\u6a21\u578b\u5bf9\u53c2\u6570\u8fdb\u884c\u5b9a\u4e49\u3002\u6211\u4eec\u5047\u8bbe\u6a21\u578b\u7684\u67095\u4e2a\u53c2\u6570\uff0c\u540d\u79f0\u5206\u522b\u4e3a A,B,C,D,E\uff0c\u5176\u4e2dA\u3001C\u53c2\u6570\u662f\u6574\u6570\u7c7b\u578b\uff0c\u5176\u4ed6\u53c2\u6570\u4e3a\u6d6e\u70b9\u6570\u7c7b\u578b\u3002"),Object(i.b)(b,{defaultValue:"header",values:[{label:"ExampleModelParams.h",value:"header"},{label:"ExampleModelParams.cpp",value:"cpp"}],mdxType:"Tabs"},Object(i.b)(O,{value:"header",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-cpp",metastring:"{13,15-19}","{13,15-19}":!0}),"//\n// Created by genshen on 2019/11/04.\n//\n\n#ifndef PNOHS_EXAMPLE_MODEL_PARAMS_H\n#define PNOHS_EXAMPLE_MODEL_PARAMS_H\n\n#include <ds/params_list.hpp>\n\n#define EXAMPLE_MODEL_PARAMS_SIZE 5\n#define EXAMPLE_MODEL_PARAMS_ID 0x100\n\nclass ExampleModelParams : public ParamsList<EXAMPLE_MODEL_PARAMS_SIZE, EXAMPLE_MODEL_PARAMS_ID> {\npublic:\n    param_tp_integer &A = data[0].integer_param;\n    param_tp_float &B = data[1].float_param;\n    param_tp_integer &C = data[2].integer_param;\n    param_tp_float &D = data[3].float_param;\n    param_tp_float &E = data[4].float_param;\n\n    ExampleModelParams() = default;\n};\n\n#endif //PNOHS_EXAMPLE_MODEL_PARAMS_H\n"))),Object(i.b)(O,{value:"cpp",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-cpp",metastring:"{10-14}","{10-14}":!0}),'//\n// Created by genshen on 2019/11/04.\n//\n\n#include "ExampleModelParams.h"\n\n// params keys/names for example model parameter.\ntemplate<>\nconst std::array<param_meta, EXAMPLE_MODEL_PARAMS_SIZE> ExampleModelParams::ParamsList<EXAMPLE_MODEL_PARAMS_SIZE, EXAMPLE_MODEL_PARAMS_ID>::metadata_list = {\n        param_meta{param_type::integer_tp, "A", {1}, {0}},\n        param_meta{param_type::float_tp, "B", {1.0}, {0.0}},\n        param_meta{param_type::integer_tp, "C", {10}, {1}},\n        param_meta{param_type::float_tp, "D", {8.0}, {1.0}},\n        param_meta{param_type::float_tp, "E", {0.5}, {-0.5}},\n};\n')))),Object(i.b)("p",null,"\u5728\u5934\u6587\u4ef6\u4e2d\uff0c\u6211\u4eec\u5b9a\u4e49\u4e00\u4e2a\u65b0\u7684\u7c7b ",Object(i.b)("inlineCode",{parentName:"p"},"ExampleModelParams"),"\uff0c\u8be5\u7c7b\u7ee7\u627f\u81ea\u6a21\u7248\u7c7b",Object(i.b)("inlineCode",{parentName:"p"},"ParamsList"),"\uff0c\u5e76\u5b9e\u4f8b\u5316\u6a21\u7248\u53c2\u6570\u3002\n\u6a21\u7248\u7c7b",Object(i.b)("inlineCode",{parentName:"p"},"ParamsList"),"\u6709\u4e24\u4e2a\u6a21\u7248\u53c2\u6570\uff0c\u7b2c\u4e00\u4e2a\u4e3a\u6a21\u578b\u53c2\u6570\u7684\u4e2a\u6570\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u6a21\u578b\u53c2\u6570\u5217\u8868id\uff0c\u5bf9\u4e8e\u4e0d\u540c\u6a21\u578b\uff0c\u5176\u5bf9\u5e94\u7684\u6a21\u578b\u53c2\u6570\u5217\u8868id\u5e94\u8be5\u552f\u4e00\u3002  "),Object(i.b)("p",null,"\u5728\u5b9e\u9645\u7684\u53c2\u6570\u5b58\u50a8\u4e2d\uff0c\u6a21\u578b\u7684\u53c2\u6570\u662f\u4f7f\u7528\u4e00\u4e2a\u6570\u7ec4\u5b58\u50a8\u7684\uff0c\u6570\u7ec4\u6bcf\u4e2a\u5143\u7d20\u662f\u4e00\u4e2a\u679a\u4e3e\u7c7b\u578b\uff08\u53ef\u8868\u793a\u6d6e\u70b9\u6570\u3001\u6574\u578b\u6216\u8005\u5e03\u5c14\u7c7b\u578b\uff09\u3002",Object(i.b)("br",{parentName:"p"}),"\n","\u5728\u5934\u6587\u4ef6\u4e2d\uff0c\u6211\u4eec\u4e3a\u6570\u7ec4\u4e2d\u7684\u5143\u7d20\u8bbe\u5b9a\u5f15\u7528\u522b\u540d\uff0c\u4f7f\u5f97\u5728\u6a21\u578b\u4e2d\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u5f15\u7528\u7684\u540d\u79f0\uff08\u5982A\u3001B\u3001C\u7b49\uff09\u6765\u8bbf\u95ee\u53c2\u6570\uff0c\u800c\u975e\u6570\u7ec4\u4e0b\u6807\uff08data","[0]","\u3001data","[1]","\u7b49\uff09\u3002  "),Object(i.b)("p",null,"\u6211\u4eec\u5728cpp\u6587\u4ef6\u4e2d\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u6a21\u578b\u7684\u53c2\u6570\u5143\u6570\u636e\u5217\u8868\uff08\u8fd9\u4e2a\u5217\u8868\u4e5f\u662f\u4e00\u4e2a\u6570\u7ec4\uff09\uff0c\u7528\u4ee5\u8868\u793a\u6bcf\u4e00\u4e2a\u53c2\u6570\u7684\u7c7b\u578b\u3001\u540d\u79f0\u3001\u6700\u5927\u503c\u3001\u6700\u5c0f\u503c\uff0c\n\u53c2\u6570\u7684\u6700\u5927\u6700\u5c0f\u503c\u53ef\u4ee5\u7528\u4e8e\u53c2\u6570\u7387\u5b9a\u65f6\u671f\u7684\u53c2\u6570\u751f\u6210\u3002",Object(i.b)("br",{parentName:"p"}),"\n","\u5176\u4e2d\uff0c ",Object(i.b)("inlineCode",{parentName:"p"},"param_meta")," \u662f\u4e00\u4e2a\u7ed3\u6784\uff0c\u5176\u5b9a\u4e49\u5982\u4e0b\uff0c\u7528\u4e8e\u6307\u5b9a\u4e00\u4e2a\u53c2\u6570\u7684\u5143\u4fe1\u606f\u3002"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-cpp"}),"struct param_meta {\n    const param_type type; // type of parameter\n    const params_key key; // name or key of parameter\n    const param_const max; // maximum value of this parameter\n    const param_const min; // minimal value of this parameter\n};\n")),Object(i.b)("p",null,"\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u6a21\u578b\u53c2\u6570\u7684\u5143\u6570\u636e\u5217\u8868\u5bf9\u5e94\u7684\u53c2\u6570\uff0c\u9700\u8981\u548c\u5934\u6587\u4ef6\u4e2d\u5b9a\u4e49\u7684\u53c2\u6570\u5f15\u7528\u522b\u540d\u7684\u987a\u5e8f\u76f8\u4e00\u81f4\u3002"),Object(i.b)("h2",{id:"\u5b9a\u4e49\u6a21\u578b\u4e0a\u4e0b\u6587-modelcontext"},"\u5b9a\u4e49\u6a21\u578b\u4e0a\u4e0b\u6587 (ModelContext)"),Object(i.b)("p",null,"ModelContext \u5728\u5b50\u6d41\u57df\u4e0a\u7528\u4e8e\u8fde\u63a5\u4ea7\u6d41\u6a21\u578b\u4e0e\u6c47\u6d41\u6a21\u578b\u7684\u6865\u6881\uff0c\u8d1f\u8d23\u5b50\u6d41\u57df\u4e0a\u7684\u4ea7\u6d41\u6a21\u578b\u4e0e\u6c47\u6d41\u6a21\u578b\u4e4b\u95f4\u7684\u6570\u636e\u5171\u4eab\u3002",Object(i.b)("br",{parentName:"p"}),"\n","\u5b9a\u4e49 ModelContext\uff0c\u9700\u8981\u65b0\u5efa\u4e00\u4e2a\u7c7b\u7ee7\u627f\u81ea ",Object(i.b)("inlineCode",{parentName:"p"},"ModelContext")," \u7c7b\u3002"),Object(i.b)("p",null,"\u793a\u4f8b\uff1a"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-cpp"}),"#ifndef EXAMPLE_MODEL_CONTEXT_H\n#define EXAMPLE_MODEL_CONTEXT_H\n\n#include <vector>\n#include <adapter/model_context.h>\n\nclass ExampleModelContext : public ModelContext {\npublic:\n    // shared rain data for routing and runoff model on a sub-bason.\n    std::vector<double> rainData;\n};\n#endif//EXAMPLE_MODEL_CONTEXT_H\n")),Object(i.b)("h2",{id:"\u5b9a\u4e49\u6a21\u578b"},"\u5b9a\u4e49\u6a21\u578b"),Object(i.b)("p",null,"\u5b9a\u4e49\u5b8c\u4e86\u6a21\u578b\u53c2\u6570\u540e\uff0c\u5c31\u53ef\u4ee5\u5b9a\u4e49\u6a21\u578b\u4e86\u3002\u5728pnohs\u4e2d\uff0c\u6a21\u578b\u5206\u4e3a\u4ea7\u6d41\u6a21\u578b\u548c\u6c47\u6d41\u6a21\u578b\u3002\n\u4ea7\u6d41\u6a21\u578b\u5e94\u8be5\u7ee7\u627f\u7c7b ",Object(i.b)("inlineCode",{parentName:"p"},"RouoffAdapter"),"\uff0c\u6c47\u6d41\u6a21\u578b\u5e94\u8be5\u7ee7\u627f ",Object(i.b)("inlineCode",{parentName:"p"},"RoutingAdapter"),"\uff0c\u5e76\u5b9e\u73b0\u76f8\u5173\u63a5\u53e3\u3002"),Object(i.b)("p",null,"\u4ee5\u6c47\u6d41\u6a21\u578b\u4e3a\u4f8b\uff0c\u65b0\u5efa\u4e00\u4e2a ExampleModel\u3002"),Object(i.b)(b,{defaultValue:"header",values:[{label:"ExampleRoutingModel.h",value:"header"},{label:"ExampleRoutingModel.cpp",value:"cpp"}],mdxType:"Tabs"},Object(i.b)(O,{value:"header",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-cpp",metastring:"{13,17,19,21,23,25,27,29,31}","{13,17,19,21,23,25,27,29,31}":!0}),"//\n// Created by genshen on 2019/11/04.\n//\n\n#ifndef PNOHS_EXAMPLE_ROUTING_MODEL_H\n#define PNOHS_EXAMPLE_ROUTING_MODEL_H\n\n#include <adapter/routing_adapter.h>\n#include <adapter/model_register.h>\n\nclass ExampleRoutingModel : public RoutingAdapter, ModelRegister::RoutingInterface {\npublic:\n    static const std::string MODEL_NAME;\n\n    ExampleRoutingModel();\n\n    void onBind(ModelContext *p_model_context, _type_node_id node_id) override;\n\n    const _type_params_count paramCount() override;\n\n    void onParamsPassed(ModelContext *p_model_context, param_const *params, size_t size) override;\n\n    void exec(ModelContext *p_context, unsigned long time_steps) override;\n\n    bool isReusable() override;\n\n    RoutingAdapter *onReused(bool reusable) override;\n\n    static RoutingAdapter *newInstance();\nprivate:\n    ExampleModelParams params;\n}\n\n#endif //PNOHS_EXAMPLE_ROUTING_MODEL_H\n"))),Object(i.b)(O,{value:"cpp",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-cpp"}),'//\n// Created by genshen on 2019/11/04.\n//\n\n#include "ExampleRoutingModel.h"\n\nconst std::string ExampleRoutingModel::MODEL_NAME = "example";\n\nExampleRoutingModel::ExampleRoutingModel() {\n    // todo init model\n}\n\nvoid ExampleRoutingModel::onBind(ModelContext *p_model_context, _type_node_id node_id) {\n    // todo onBind\n}\n\nconst _type_params_count ExampleRoutingModel::paramCount() {\n    return ExampleModelParams::getParamsSize();\n}\n\nvoid ExampleRoutingModel::onParamsPassed(ModelContext *p_model_context, param_const *_params, size_t size) {\n    // todo onParamsPassed\n}\n\nvoid ExampleRoutingModel::exec(ModelContext *p_context, unsigned long time_steps) {\n    // todo\n}\n\nbool ExampleRoutingModel::isReusable() {\n    return true;\n}\n\nRoutingAdapter *ExampleRoutingModel::onReused(bool reusable) {\n    return this;\n}\n\nRoutingAdapter *ExampleRoutingModel::newInstance() {\n    return new ExampleRoutingModel();\n}\n')))),Object(i.b)("p",null,"\u5176\u4e2d\uff0c\u5728\u5b9a\u4e49\u7c7b ExampleRoutingModel \u7684\u5934\u6587\u4ef6\u4e2d\uff0c\u58f0\u660e\u4e86\u4e00\u4e2a\u6210\u5458",Object(i.b)("inlineCode",{parentName:"p"},"params"),"\uff0c\u6b64\u5373\u6a21\u578b\u7684\u53c2\u6570\u5bf9\u8c61\uff1b\n\u6b64\u5916\uff0c\u8fd8\u58f0\u660e\u4e86\u4e00\u4e9b\u57fa\u7c7b\u7684\u865a\u51fd\u6570\u7684\u58f0\u660e\uff08\u5c06\u5728\u4e0b\u9762\u8ba8\u8bba\uff09\u4ee5\u53ca\u4e00\u4e2a string \u7c7b\u578b\u7684\u6210\u5458",Object(i.b)("inlineCode",{parentName:"p"},"MODEL_NAME"),"\u7684\u58f0\u660e\u4ee5\u8868\u793a\u6a21\u578b\u7684\u540d\u79f0\u3002  "),Object(i.b)("p",null,"\u5728cpp\u6587\u4ef6\u4e2d\uff0c\u5305\u542b\u6210\u5458",Object(i.b)("inlineCode",{parentName:"p"},"MODEL_NAME"),"\u7684\u5b9a\u4e49\u548c\u5934\u6587\u4ef6\u4e2d\u76f8\u5173\u51fd\u6570\u7684\u5b9a\u4e49\uff0c\u5404\u4e2a\u51fd\u6570\u7684\u5177\u4f53\u542b\u4e49\u7b80\u8ff0\u5982\u4e0b\uff1a"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"onBind\uff1a\u5f53\u6a21\u578b\u548c\u5177\u4f53\u7684\u5b50\u6d41\u57df\u7ed1\u5b9a\u65f6\u8c03\u7528\uff1b"),Object(i.b)("li",{parentName:"ul"},"paramCount\uff1a\u8fd4\u56de\u6a21\u578b\u7684\u53c2\u6570\u4e2a\u6570\uff1b"),Object(i.b)("li",{parentName:"ul"},"onParamsPassed\uff1a\u4ece\u5916\u90e8\u8bbe\u7f6e\u6a21\u578b\u7684\u5404\u4e2a\u53c2\u6570\uff08\u5982\u53c2\u6570\u7387\u5b9a\uff09\uff0c\u8fd9\u4e2a\u51fd\u6570\u9700\u8981\u5b9e\u73b0\u5c06\u5916\u90e8\u4f20\u9012\u7684\u53c2\u6570\u5199\u5165\u5230\u6210\u5458",Object(i.b)("inlineCode",{parentName:"li"},"params"),"\u4e2d\uff1b"),Object(i.b)("li",{parentName:"ul"},"exec\uff1a\u5728\u6c34\u5faa\u73af\u6a21\u62df\u4e2d\uff0c\u8be5\u5b50\u6d41\u57df\u4e0a\u7684\u4ea7\u6d41\u6216\u6c47\u6d41\u6a21\u578b\u88ab\u8c03\u7528\u65f6\u6267\u884c\uff0c",Object(i.b)("inlineCode",{parentName:"li"},"time_steps"),"\u53c2\u6570\u4e3a\u5f53\u524d\u65f6\u95f4\u6b65\u6570\uff1b"),Object(i.b)("li",{parentName:"ul"},"isReusable\uff1a\u8bbe\u7f6e\u6a21\u578b\u662f\u5426\u53ef\u4ee5\u91cd\u7528\u3002\u4f8b\u5982\uff0c\u5728\u53c2\u6570\u7387\u5b9a\u4e2d\uff0c\u4f1a\u91cd\u590d\u8c03\u7528\u6c34\u5faa\u73af\u6a21\u62df\u8fc7\u7a0b\uff0c\u53ef\u4ee5\u91c7\u7528\u8fd9\u6837\u7684\u7b56\u7565\uff1a\n\u5373\u5982\u679c\u6a21\u62df\u88ab\u8bbe\u7f6e\u4e3a\u4e0d\u80fd\u91cd\u7528\uff0c\u5219\u4e00\u8f6e\u7387\u5b9a\u7ed3\u675f\u540e\uff0c\u5404\u4e2a\u5b50\u6d41\u57df\u4e0a\u7684\u6a21\u578b\u5bf9\u8c61\u4f1a\u88ab\u91ca\u653e\uff0c\u5728\u4e0b\u4e00\u8f6e\u7387\u5b9a\u65f6\u91cd\u65b0\u751f\u6210\u5bf9\u5e94\u7684\u4ea7\u6c47\u6d41\u6a21\u578b\u5bf9\u8c61\uff1b\u5982\u679c\u53ef\u4ee5\u91cd\u7528\uff0c\u4e00\u8f6e\u7387\u5b9a\u7ed3\u675f\u540e\uff0c\u4e0d\u91ca\u653e\u6a21\u578b\u5bf9\u8c61\uff0c\u4ec5\u91cd\u7f6e\u6a21\u578b\u5bf9\u8c61\u4e2d\u76f8\u5173\u7684\u6210\u5458\u503c\uff0c\u4e0b\u4e00\u8f6e\u7387\u5b9a\u7ee7\u7eed\u4f7f\u7528\u8be5\u6a21\u578b\u5bf9\u8c61\uff1b"),Object(i.b)("li",{parentName:"ul"},"onReused\uff1a\u5f53\u6a21\u578b\u5bf9\u8c61\u88ab\u91cd\u7528\u65f6\u7684\u56de\u8c03\uff0c\u53ef\u4ee5\u5728\u8fd9\u91cc\u91cd\u7f6e\u6a21\u578b\u5bf9\u8c61\u4e2d\u76f8\u5173\u7684\u6210\u5458\u503c\uff1b"),Object(i.b)("li",{parentName:"ul"},"newInstance\uff1a\u8fd9\u662f\u4e2a\u9759\u6001\u65b9\u6cd5\uff0c\u8c03\u7528\u8be5\u65b9\u6cd5\u53ef\u8fd4\u56de\u4e00\u4e2a\u8be5\u6a21\u578b\u7684\u65b0\u5bf9\u8c61\u3002")),Object(i.b)("p",null,"\u5b9a\u4e49\u4ea7\u6d41\u6a21\u578b\u4e5f\u662f\u7c7b\u4f3c\u7684\u65b9\u5f0f\uff0c\u5728\u6b64\u4e0d\u518d\u8d58\u8ff0\u3002"),Object(i.b)("h2",{id:"\u6ce8\u518c\u6a21\u578b"},"\u6ce8\u518c\u6a21\u578b"),Object(i.b)("p",null,"\u81f3\u6b64\uff0c\u5df2\u7ecf\u5b9a\u4e49\u597d\u4e86\u4e00\u4e2a\u6a21\u578b\u4e86\uff0c\u6700\u540e\u9700\u8981\u5728\u7a0b\u5e8f\u521d\u59cb\u5316\u7684\u65f6\u5019\uff0c\u5c06\u6a21\u578b\u6ce8\u518c\u6dfb\u52a0\u5230\u6a21\u578b\u5e93\u4e2d\u3002"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-cpp"}),"#include <adapter/model_register.h>\n\nvoid my_init_routine(){\n    ModelRegister::registerRoutingModel(ExampleRoutingModel::MODEL_NAME, ExampleRoutingModel::newInstance);\n}\n\nint main(){\n    // some other initialization.\n    my_init_routine();\n    // some other logic (e.g run simulation).\n    return 0;\n}\n")),Object(i.b)("p",null,"\u5176\u4e2d\uff0c",Object(i.b)("inlineCode",{parentName:"p"},"ModelRegister::registerRoutingModel"),"\u51fd\u6570\u7528\u4e8e\u8fd9\u6b21\u6c47\u6d41\u6a21\u578b\uff0c\u5bf9\u4e8e\u4ea7\u6d41\u6a21\u578b\uff0c\n\u53ef\u4ee5\u4f7f\u7528",Object(i.b)("inlineCode",{parentName:"p"},"ModelRegister::registerRunoffModel"),"\u51fd\u6570\u8fdb\u884c\u6ce8\u518c\u3002"))}j.isMDXComponent=!0},87:function(e,n,t){"use strict";t.d(n,"a",(function(){return u})),t.d(n,"b",(function(){return b}));var a=t(0),r=t.n(a);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function p(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var c=r.a.createContext({}),d=function(e){var n=r.a.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},u=function(e){var n=d(e.components);return r.a.createElement(c.Provider,{value:n},e.children)},s={inlineCode:"code",wrapper:function(e){var n=e.children;return r.a.createElement(r.a.Fragment,{},n)}},m=r.a.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,c=p(e,["components","mdxType","originalType","parentName"]),u=d(t),m=a,b=u["".concat(l,".").concat(m)]||u[m]||s[m]||o;return t?r.a.createElement(b,i(i({ref:n},c),{},{components:t})):r.a.createElement(b,i({ref:n},c))}));function b(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,l=new Array(o);l[0]=m;var i={};for(var p in n)hasOwnProperty.call(n,p)&&(i[p]=n[p]);i.originalType=e,i.mdxType="string"==typeof e?e:a,l[1]=i;for(var c=2;c<o;c++)l[c]=t[c];return r.a.createElement.apply(null,l)}return r.a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},89:function(e,n,t){"use strict";function a(e){var n,t,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(n=0;n<e.length;n++)e[n]&&(t=a(e[n]))&&(r&&(r+=" "),r+=t);else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}n.a=function(){for(var e,n,t=0,r="";t<arguments.length;)(e=arguments[t++])&&(n=a(e))&&(r&&(r+=" "),r+=n);return r}},93:function(e,n,t){"use strict";var a=t(0),r=Object(a.createContext)(void 0);n.a=r},94:function(e,n,t){"use strict";var a=t(0),r=t(93);n.a=function(){var e=Object(a.useContext)(r.a);if(null==e)throw new Error("`useUserPreferencesContext` is used outside of `Layout` Component.");return e}}}]);